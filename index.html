<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Fishackathon</title>
    <link rel="stylesheet" href="https://bootswatch.com/cyborg/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="css/stylesheet.css">
    <style>
       #map {
        height: 800px;
        width: 70%;
       }
    </style>
  </head>
  <body>
    <button type="button" onclick="getInfo()">Click Me!</button>
    <h3>My Google Maps Demo</h3>
    <div id="map"></div>
    <div id="sideMenu" class="sideMenu">
        
    </div>
    <script>
      var locations = [
        ['<div id="content">'+
            '<div id="bodyContent">'+
            '<p><img src=images/popup.png></p>'+
            '</div>'+
            '</div>', -33.890542, 151.274856, 4, 'Port Sydney'],
        ['<div id="content">'+
            '<div id="bodyContent">'+
            '<p><img src=images/popup.png></p>'+
            '</div>'+
            '</div>', -33.923036, 151.259052, 5, 'Port Coogee'],
        ['<div id="content">'+
            '<div id="bodyContent">'+
            '<p><img src=images/popup.png></p>'+
            '</div>'+
            '</div>', -34.028249, 151.157507, 3, 'Port Crunulla'],
        ['<div id="content">'+
            '<div id="bodyContent">'+
            '<p><img src=images/popup.png></p>'+
            '</div>'+
            '</div>', -33.80010128657071, 151.28747820854187, 2, 'Port Manly'],
        ['<div id="content">'+
            '<div id="bodyContent">'+
            '<p><img src=images/popup.png></p>'+
            '</div>'+
            '</div>', -33.950198, 151.259302, 1, 'Port Maroubra']
      ];

      function initMap() {
        var uluru = {lat: -33.958249, lng: 151.18747820854187};
        var map = new google.maps.Map(document.getElementById('map'), {
          zoom: 10,
          center: uluru,
          styles: [
            {elementType: 'geometry', stylers: [{color: '#242f3e'}]},
            {elementType: 'labels.text.stroke', stylers: [{color: '#242f3e'}]},
            {elementType: 'labels.text.fill', stylers: [{color: '#746855'}]},
            {
              featureType: 'administrative.locality',
              elementType: 'labels.text.fill',
              stylers: [{color: '#d59563'}]
            },
            {
              featureType: 'poi',
              elementType: 'labels.text.fill',
              stylers: [{color: '#d59563'}]
            },
            {
              featureType: 'poi.park',
              elementType: 'geometry',
              stylers: [{color: '#263c3f'}]
            },
            {
              featureType: 'poi.park',
              elementType: 'labels.text.fill',
              stylers: [{color: '#6b9a76'}]
            },
            {
              featureType: 'road',
              elementType: 'geometry',
              stylers: [{color: '#38414e'}]
            },
            {
              featureType: 'road',
              elementType: 'geometry.stroke',
              stylers: [{color: '#212a37'}]
            },
            {
              featureType: 'road',
              elementType: 'labels.text.fill',
              stylers: [{color: '#9ca5b3'}]
            },
            {
              featureType: 'road.highway',
              elementType: 'geometry',
              stylers: [{color: '#746855'}]
            },
            {
              featureType: 'road.highway',
              elementType: 'geometry.stroke',
              stylers: [{color: '#1f2835'}]
            },
            {
              featureType: 'road.highway',
              elementType: 'labels.text.fill',
              stylers: [{color: '#f3d19c'}]
            },
            {
              featureType: 'transit',
              elementType: 'geometry',
              stylers: [{color: '#2f3948'}]
            },
            {
              featureType: 'transit.station',
              elementType: 'labels.text.fill',
              stylers: [{color: '#d59563'}]
            },
            {
              featureType: 'water',
              elementType: 'geometry',
              stylers: [{color: '#17263c'}]
            },
            {
              featureType: 'water',
              elementType: 'labels.text.fill',
              stylers: [{color: '#515c6d'}]
            },
            {
              featureType: 'water',
              elementType: 'labels.text.stroke',
              stylers: [{color: '#17263c'}]
            }
          ],
          mapTypeId: google.maps.MapTypeId.ROADMAP
        });


        var infowindow = new google.maps.InfoWindow();

        var marker, i, cityCircle;
        var image = {
          url: 'images/boat.png',
          // This marker is 20 pixels wide by 32 pixels high.
          //size: new google.maps.Size(40, 40),

        };

    var reservemap = {

        reserve1: {
          center: {lat: -34.314, lng: 151.08747820854187},
          population: 15405837
        },
        reserve2: {
          center: {lat: -33.5, lng: 151.18747820854187},
          population: 7405837
        }

      };

        for (i = 0; i < locations.length; i++) {  
          marker = new google.maps.Marker({
            position: new google.maps.LatLng(locations[i][1]+0.005, locations[i][2]+0.08*i),
            icon: image,
            map: map
          });
           portMarker = new google.maps.Marker({
            position: new google.maps.LatLng(locations[i][1], locations[i][2]),
            map: map
          });

         for (var city in reservemap) {
          // Add the circle for this city to the map.
          var cityCircle = new google.maps.Circle({
            strokeColor: 'white',
            strokeWeight: .5,
            
            fillColor: '#48a0af',
            fillOpacity: .2,
            map: map,
            center: reservemap[city].center,
            radius: Math.sqrt(reservemap[city].population) *5
          });
        }

          google.maps.event.addListener(marker, 'click', (function(marker, i) {
            return function() {
              infowindow.setContent(locations[i][0]);
              infowindow.open(map, marker);
            }
          })(marker, i));

          google.maps.event.addListener(portMarker, 'click', (function(portMarker, i) {
            return function() {
              infowindow.setContent(locations[i][4]);
              infowindow.open(map, portMarker);
            }
          })(portMarker, i));
        }
        
      }

      function getInfo() {
         axios.get('https://services.marinetraffic.com/api/portcalls/v:3/4356ce9dcfbef892c0e647084fffc0f23937d8c2/portid:1/timespan:60?protocol=json')
          .then(function(response){
              console.log(response);
          });

      }
    </script>
    <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBLtB9oI1AJQQeyDrz7aBvIBqXQoCmwBTU&callback=initMap">
    </script>
    
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
  </body>
</html>